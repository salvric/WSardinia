{% extends 'base.html.twig' %}
{% block content %}
<div class="main">
<div class="container">
    <div class="row-fluid">
        <div class="col-md-8 card-box">
            <div class="img-container" style="background-image:url('{{ asset('images/location/' ~ location.imageName) }}')">
                <div class="loc_title">
                    <h1>{{ location.name }}</h1>
                </div>
            </div>
            <div class="desc-container">
                <p class="description">
                    {{ location.description }}
                </p>
                {{ rating |rating (5, 'fa-norm') }}
            </div>
        </div>
        <div class="col-md-3 col-md-offset-1 card-box">            
            <div class="desc-container">
                <h3>Activities</h3>
                <p class="description">
                    {{ location.description }}
                </p>
            </div>            
        </div>
    </div>
    <div class="row-fluid">
        <div class="col-md-5 card-box margin-top">
            <input id="latitude" type="hidden" value="{{location.lat}}">
            <input id="longitude" type="hidden" value="{{location.lng}}">
            <div id="map" class="card-box" style="width:100%; height:400px"></div>
            <script>
            var lat = document.getElementById('latitude').value;
            var lng = document.getElementById('longitude').value;             
                
                var myCenter = new google.maps.LatLng(lat,lng);
                var mapCanvas = document.getElementById("map");
                var mapOptions = {center: myCenter, zoom: 13};
                var map = new google.maps.Map(mapCanvas, mapOptions);
                var marker = new google.maps.Marker({position:myCenter});
                marker.setMap(map);
            </script>
        </div>        
        <div class="col-md-6 col-md-offset-1 margin-top">
            <h3 class="title_review">Photos</h3>
            <a class="plusbutton" data-toggle="modal" data-target=".photoModal">
                <i class="fa fa-plus-square fa-1x"></i>
            </a><br>
            {% if photos is empty %}
                <p>Be the first to post a picture about {{location.name}}</p>                    
            {% else %}
            {% for photo in photos %}              
            <div class="thumbLoc" style="background-image:url('{{ asset('images/location/' ~ photo.imageName) }}')"></div>
            <div class="thumbLoc" style="background-image:url('{{ asset('images/location/' ~ photo.imageName) }}')"></div>
            {% endfor %}
            {% endif %}

            <div class="modal fade photoModal" tabindex="-1" role="dialog" aria-labelledby="photoModal">
              <div class="modal-dialog modal-sm" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                    </button>
                    {{ form_start(formAddPhoto) }}
                    {{ form_widget(formAddPhoto) }}
                    <div class="modal-footer">
                    <button type="submit" class="btn dark">Save</button>
                    {{ form_end(formAddPhoto) }}
                    </div>
                </div>
              </div>
            </div>
            
        </div>
    </div>    
</div>
<div class="container">
    <div class="row-fluid">
        <div class="col-md-12 margin-top text-center">
            <div class="review-container">
                <h3 class="title_review">Review</h3>
                <a class="plusbutton" data-toggle="collapse" href="#showform" aria-expanded="false" aria-controls="showform"><i class="fa fa-plus-square fa-1x"></i></a>
                {% if reviews is empty %}
                    <p>Be the first to leave a review</p>                    
                {% endif %}
                <div class="collapse" id="showform">
                  <div class="card-box review-form">
                    {{ form_start(formAddReview) }}
                    {{ form_widget(formAddReview) }}
                    <button type="submit" class="btn dark">Save</button>
                    {{ form_end(formAddReview) }}
                  </div>
                </div>
                {% for review in reviews %}
                    <div class="single_review">
                        <div class="review_thumb" style="background-image:url('{{ asset('images/profile/' ~ review.user.imageName) }}')">
                        </div>
                        <div class="bubble text-center">
                           {{review.comment}}
                           <div class="userdetails">
                                {{review.user.username}}  on {{review.dateIns | date ('j M Y')}}
                           </div>
                        </div>
                    </div>
                {% endfor %}   
            </div>
        </div>
    </div>
    
</div>
</div>
{% endblock %}
