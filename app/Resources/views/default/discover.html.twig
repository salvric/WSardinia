{% extends 'base.html.twig' %}
{% block content %}
{% block javascripts%}
<script type="text/javascript">		

function initMap(){
	var locations = JSON.parse('{{ locations | raw }}');
	console.log(locations);
    var map = new google.maps.Map(document.getElementById('wsMap'), {
	  zoom: 7,
	  center: new google.maps.LatLng(40.0562194, 7.8577928),
	  disableDefaultUI: true,
      scrollwheel: false,
      draggable: true,
	});
    var infowindow = new google.maps.InfoWindow();
	var marker, i;

	for (i = 0; i < locations.length; i++) {
	    marker = new google.maps.Marker({
	        position: new google.maps.LatLng(locations[i]['lat'], locations[i]['lng']),
	        map: map,
	        title: locations[i]['name']
    	});
    	var id = locations[i]['id'];
	    //var contentString = '<a href="{{path ("location", {"id": 'id' }) }}">'+locations[i]['name']+'</a>';
	   // var url = contentString.replace("id", id);
    	google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
            infowindow.setContent(locations[i]['name']);
            infowindow.open(map, marker);
        	}
    	})(marker, i));
	}
}      
</script>
{% endblock %}
<div id="wsMap" style="width: 100%; height:800px"></div>

{% endblock %}